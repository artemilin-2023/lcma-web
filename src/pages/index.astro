---
import Layout from '../layouts/Layout.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';
import FormattedDate from '../components/FormattedDate.astro';

const recentPosts = (await getCollection('blog'))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 3);
---

<Layout title={SITE_TITLE} description={SITE_DESCRIPTION}>
	
	<section class="hero" id="hero">
		<div class="hero-content">
			<div class="avatar-container">
				<Image src="/images/placeholder-avatar.png" alt="–ê–≤–∞—Ç–∞—Ä" class="pulse-avatar" width={150} height={150} loading="eager" />
			</div>
			<h1 class="neon-text">–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é –≤ <span class="gradient-text">{SITE_TITLE}</span></h1>
			<p class="subtitle neon-text-flicker">–ú–æ–π nerd —É–≥–æ–ª–æ–∫ –≤ —Å–µ—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç</p>
			<div class="hero-buttons">
				<a href="/blog" class="neon-button">–ú–æ–π –±–ª–æ–≥</a>
				<a href="/about" class="neon-button">–û–±–æ –º–Ω–µ</a>
			</div>
			
			<!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ -->
			<div class="page-nav">
				<a href="#features" class="page-nav-link">–û —Å–∞–π—Ç–µ</a>
				<a href="#recent-posts" class="page-nav-link">–°—Ç–∞—Ç—å–∏</a>
			</div>
		</div>
	</section>

	<section class="features neon-box" id="features">
		<h2 class="section-title gradient-text">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
		<p class="feature-text">
			–≠—Ç–æ—Ç —Å–∞–π—Ç —Å–æ–∑–¥–∞–Ω —Å –ª—é–±–æ–≤—å—é –∫ –∞–Ω–∏–º–µ, –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é, ascii-–∞—Ä—Ç—É –∏ –Ω–µ–æ–Ω–æ–≤—ã–º —Ü–≤–µ—Ç–∞–º!
		</p>
		
		<div class="feature-cards">
				<div class="feature-card">
					<a href="/blog" class="feature-card-link">
						<div class="icon">‚ú®</div>
						<h3>–ë–ª–æ–≥</h3>
						<p>–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –±—É–¥—É—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –æ –º–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö, –∏–¥–µ—è—Ö, –º—ã—Å–ª—è—Ö –∏ –º–Ω–æ–≥–æ–º –¥—Ä—É–≥–æ–º</p>
					</a>
				</div>
				<div class="feature-card">
					<a href="/ascii-gallery" class="feature-card-link">
						<div class="icon">üé®</div>
						<h3>Ascii-–∞—Ä—Ç –≥–∞–ª–µ—Ä–µ—è</h3>
						<p>–ü—Ä–æ—Å—Ç–æ –∫—Ä–∞—Å–∏–≤—ã–µ ascii-–∞—Ä—Ç—ã</p>
					</a>
				</div>
		</div>
		
		<div class="scroll-to-section">
			<a href="#recent-posts" class="scroll-arrow">
				<span>–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å—Ç–∞—Ç—å—è–º</span>
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<polyline points="6 9 12 15 18 9"></polyline>
				</svg>
			</a>
		</div>
	</section>

	<section class="recent-posts" id="recent-posts">
		<h2 class="section-title gradient-text">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –±–ª–æ–≥–µ</h2>
		
		<div class="blog-grid">
			{recentPosts.map((post) => (
				<a href={`/blog/${post.id}/`} class="blog-card">
					<div class="card-img-container">
						<Image src={post.data.heroImage || '/blog-placeholder-1.jpg'} alt={post.data.title} width={800} height={450} />
					</div>
					<div class="card-content">
						<h3>{post.data.title}</h3>
						<p class="post-date"><FormattedDate date={post.data.pubDate} /></p>
						<p>{post.data.description}</p>
						<span class="read-more">–ß–∏—Ç–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí</span>
					</div>
				</a>
			))}
		</div>
		
		<div class="view-all">
			<a href="/blog" class="neon-button">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏</a>
		</div>
		
		<div class="back-to-top">
			<a href="#header-container" class="scroll-arrow up">
				<span>–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–≤–µ—Ä—Ö</span>
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<polyline points="18 15 12 9 6 15"></polyline>
				</svg>
			</a>
		</div>
	</section>
</Layout>

<style>
	/* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Å–∫—Ä–æ–ª–ª–∏–Ω–≥–∞ */
	html, body {
		overflow-x: hidden;
		overflow-y: auto;
		scrollbar-width: thin;
		scrollbar-color: var(--neon-purple) rgba(0, 0, 0, 0.3);
	}

	::-webkit-scrollbar {
		width: 8px;
		background-color: rgba(0, 0, 0, 0.3);
	}

	::-webkit-scrollbar-thumb {
		border-radius: 4px;
		background-color: var(--neon-purple);
		box-shadow: 0 0 5px var(--neon-purple);
	}

	::-webkit-scrollbar-track {
		background-color: rgba(0, 0, 0, 0.3);
	}
	
	.hero {
		padding: 4rem 0;
		text-align: center;
	}
	
	.hero-content {
		max-width: 800px;
		margin: 0 auto;
	}
	
	.avatar-container {
		margin-bottom: 2rem;
		display: flex;
		justify-content: center;
	}
	
	.pulse-avatar {
		border-radius: 50%;
		object-fit: cover;
		border: 3px solid var(--neon-purple);
	}
	
	.hero h1 {
		font-family: var(--font-heading);
		font-size: 3rem;
		margin-bottom: 1rem;
	}
	
	.subtitle {
		font-family: var(--font-kawaii);
		font-size: 1.5rem;
		margin-bottom: 2rem;
		opacity: 0.9;
	}
	
	.hero-buttons {
		display: flex;
		gap: 1.5rem;
		justify-content: center;
		margin-top: 2rem;
	}
	
	/* –°—Ç–∏–ª–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ */
	.page-nav {
		margin-top: 3rem;
		display: flex;
		justify-content: center;
		gap: 2rem;
	}
	
	.page-nav-link {
		position: relative;
		font-weight: 500;
		padding: 0.5rem 1rem;
		transition: all 0.3s ease;
	}
	
	.page-nav-link::after {
		content: '';
		position: absolute;
		bottom: -5px;
		left: 0;
		width: 100%;
		height: 2px;
		background: var(--neon-purple);
		transform: scaleX(0);
		transition: transform 0.3s ease;
	}
	
	.page-nav-link:hover {
		text-shadow: 0 0 5px var(--neon-purple);
	}
	
	.page-nav-link:hover::after {
		transform: scaleX(1);
		box-shadow: 0 0 8px var(--neon-purple);
	}
	
	.features {
		padding: 2rem;
		margin: 3rem 0;
	}
	
	.section-title {
		font-family: var(--font-heading);
		text-align: center;
		margin-bottom: 2rem;
		font-size: 2.2rem;
	}

	.feature-text {
		text-align: center;
	}
	
	.feature-cards {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
		gap: 2rem;
		margin-top: 2rem;
		justify-items: center;
	}

	.feature-card-link {
		color: inherit;
		display: block;
		width: 100%;
		height: 100%;
	}
	
	.feature-card {
		padding: 1.5rem;
		border-radius: 0.5rem;
		background: rgba(45, 0, 100, 0.3);
		backdrop-filter: blur(5px);
		transition: all 0.3s ease;
		border: 1px solid rgba(138, 43, 226, 0.3);
		width: 100%;
		max-width: 90%;
	}
	
	.feature-card:hover {
		transform: translateY(-5px);
		box-shadow: 0 0 10px var(--neon-purple);
	}
	
	.feature-card .icon {
		font-size: 2.5rem;
		margin-bottom: 1rem;
	}
	
	.feature-card h3 {
		font-family: var(--font-kawaii);
		margin-bottom: 1rem;
		font-size: 1.5rem;
		color: var(--neon-pink);
		text-shadow: 0 0 5px var(--neon-pink);
	}
	
	/* –°—Ç—Ä–µ–ª–∫–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –≤–Ω–∏–∑ */
	.scroll-to-section {
		text-align: center;
		margin-top: 3rem;
	}
	
	.scroll-arrow {
		display: inline-flex;
		flex-direction: column;
		align-items: center;
		transition: all 0.3s ease;
		opacity: 0.8;
	}
	
	.scroll-arrow span {
		font-family: var(--font-alternative);
		margin-bottom: 0.5rem;
	}
	
	.scroll-arrow:hover {
		transform: translateY(5px);
		opacity: 1;
	}
	
	.scroll-arrow.up:hover {
		transform: translateY(-5px);
	}
	
	.scroll-arrow svg {
		animation: floatingAnimation 2s ease-in-out infinite;
	}
	
	.recent-posts {
		margin: 4rem 0;
	}
	
	.blog-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
		gap: 2rem;
		margin: 2rem 0;
	}
	
	.blog-card {
		text-decoration: none;
		color: inherit;
		overflow: hidden;
		height: 100%;
		display: flex;
		flex-direction: column;
	}
	
	.card-img-container {
		overflow: hidden;
		border-radius: 0.75rem 0.75rem 0 0;
		aspect-ratio: 16/9;
	}
	
	.card-img-container img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		transition: transform 0.5s ease;
	}
	
	.blog-card:hover .card-img-container img {
		transform: scale(1.05);
	}
	
	.card-content {
		padding: 1.5rem;
		flex-grow: 1;
		display: flex;
		flex-direction: column;
	}
	
	.card-content h3 {
		font-family: var(--font-accent);
		margin-bottom: 0.75rem;
		color: var(--neon-blue);
		text-shadow: 0 0 3px var(--neon-blue);
	}
	
	.read-more {
		margin-top: auto;
		font-weight: 500;
		color: var(--neon-pink);
		transition: all 0.3s ease;
	}
	
	.blog-card:hover .read-more {
		text-shadow: 0 0 5px var(--neon-pink);
	}
	
	.view-all {
		text-align: center;
		margin-top: 2rem;
	}
	
	/* –ö–Ω–æ–ø–∫–∞ "–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–≤–µ—Ä—Ö" –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
	.back-to-top {
		text-align: center;
		margin-top: 4rem;
	}
	
	@media (max-width: 768px) {
		.hero h1 {
			font-size: 2.2rem;
		}
		
		.subtitle {
			font-size: 1.2rem;
		}
		
		.hero-buttons {
			flex-direction: column;
			align-items: center;
			gap: 1rem;
		}
		
		.hero-buttons .neon-button {
			width: 100%;
			max-width: 250px;
		}
		
		.page-nav {
			flex-direction: column;
			gap: 1rem;
		}
	}
	
	@keyframes asciiFlicker {
		0%, 5%, 10% {
			opacity: 0.3;
		}
		2%, 8%, 15%, 25%, 30%, 100% {
			opacity: 0.8;
		}
		50%, 70% {
			opacity: 0.5;
		}
	}

	@keyframes floatingAscii {
		0% {
			transform: translate(0, 0) rotate(var(--rotation));
		}
		50% {
			transform: translate(10px, -10px) rotate(var(--rotation));
		}
		100% {
			transform: translate(-5px, 5px) rotate(var(--rotation));
		}
	}

	.post-date {
		font-size: 0.85rem;
		opacity: 0.8;
		margin: -0.5rem 0 0.75rem 0;
		font-family: var(--font-alternative);
		color: var(--neon-blue);
		font-style: italic;
		text-shadow: 0 0 2px var(--neon-blue);
	}
</style>
